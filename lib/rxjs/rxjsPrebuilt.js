var M=function(e,r){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])},M(e,r)};function v(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}M(e,r),e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function tn(e,r,n,t){return new(n||(n=Promise))(function(o,i){function u(f){try{a(t.next(f))}catch(s){i(s)}}function c(f){try{a(t.throw(f))}catch(s){i(s)}}function a(f){var s;f.done?o(f.value):(s=f.value,s instanceof n?s:new n(function(l){l(s)})).then(u,c)}a((t=t.apply(e,r||[])).next())})}function L(e,r){var n,t,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=c(0),u.throw=c(1),u.return=c(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(a){return function(f){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,s[0]&&(i=0)),i;)try{if(n=1,t&&(o=2&s[0]?t.return:s[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,s[1])).done)return o;switch(t=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,t=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!((o=o.length>0&&o[o.length-1])||s[0]!==6&&s[0]!==2)){i=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(s[0]===6&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(l){s=[6,l],t=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([a,f])}}}function P(e){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&e[r],t=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var t,o,i=n.call(e),u=[];try{for(;(r===void 0||r-- >0)&&!(t=i.next()).done;)u.push(t.value)}catch(c){o={error:c}}finally{try{t&&!t.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function w(e,r,n){if(n||arguments.length===2)for(var t,o=0,i=r.length;o<i;o++)!t&&o in r||(t||(t=Array.prototype.slice.call(r,0,o)),t[o]=r[o]);return e.concat(t||Array.prototype.slice.call(r))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function on(e,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,o=n.apply(e,r||[]),i=[];return t=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",function(l){return function(h){return Promise.resolve(h).then(l,f)}}),t[Symbol.asyncIterator]=function(){return this},t;function u(l,h){o[l]&&(t[l]=function(y){return new Promise(function(d,E){i.push([l,y,d,E])>1||c(l,y)})},h&&(t[l]=h(t[l])))}function c(l,h){try{(y=o[l](h)).value instanceof S?Promise.resolve(y.value.v).then(a,f):s(i[0][2],y)}catch(d){s(i[0][3],d)}var y}function a(l){c("next",l)}function f(l){c("throw",l)}function s(l,h){l(h),i.shift(),i.length&&c(i[0][0],i[0][1])}}function un(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e[Symbol.asyncIterator];return n?n.call(e):(e=P(e),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r);function t(o){r[o]=e[o]&&function(i){return new Promise(function(u,c){(function(a,f,s,l){Promise.resolve(l).then(function(h){a({value:h,done:s})},f)})(u,c,(i=e[o](i)).done,i.value)})}}}function p(e){return typeof e=="function"}function A(e){var r=e(function(n){Error.call(n),n.stack=new Error().stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var V=A(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,t){return t+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function W(e,r){if(e){var n=e.indexOf(r);0<=n&&e.splice(n,1)}}var g=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,n,t,o,i;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var c=P(u),a=c.next();!a.done;a=c.next())a.value.remove(this)}catch(d){r={error:d}}finally{try{a&&!a.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}else u.remove(this);var f=this.initialTeardown;if(p(f))try{f()}catch(d){i=d instanceof V?d.errors:[d]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var l=P(s),h=l.next();!h.done;h=l.next()){var y=h.value;try{cn(y)}catch(d){i=i??[],d instanceof V?i=w(w([],m(i)),m(d.errors)):i.push(d)}}}catch(d){t={error:d}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}}if(i)throw new V(i)}},e.prototype.add=function(r){var n;if(r&&r!==this)if(this.closed)cn(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(r)}},e.prototype._hasParent=function(r){var n=this._parentage;return n===r||Array.isArray(n)&&n.includes(r)},e.prototype._addParent=function(r){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(r),n):n?[n,r]:r},e.prototype._removeParent=function(r){var n=this._parentage;n===r?this._parentage=null:Array.isArray(n)&&W(n,r)},e.prototype.remove=function(r){var n=this._finalizers;n&&W(n,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}(),yn=g.EMPTY;function mn(e){return e instanceof g||e&&"closed"in e&&p(e.remove)&&p(e.add)&&p(e.unsubscribe)}function cn(e){p(e)?e():e.unsubscribe()}var j={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},wn=function(e,r){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];return setTimeout.apply(void 0,w([e,r],m(n)))};function gn(e){wn(function(){var r=j.onUnhandledError;if(!r)throw e;r(e)})}function G(){}var Rn=H("C",void 0,void 0);function H(e,r,n){return{kind:e,value:r,error:n}}var O=null;function q(e){if(j.useDeprecatedSynchronousErrorHandling){var r=!O;if(r&&(O={errorThrown:!1,error:null}),e(),r){var n=O,t=n.errorThrown,o=n.error;if(O=null,t)throw o}}else e()}var X=function(e){function r(n){var t=e.call(this)||this;return t.isStopped=!1,n?(t.destination=n,mn(n)&&n.add(t)):t.destination=qn,t}return v(r,e),r.create=function(n,t,o){return new K(n,t,o)},r.prototype.next=function(n){this.isStopped?B(function(t){return H("N",t,void 0)}(n),this):this._next(n)},r.prototype.error=function(n){this.isStopped?B(H("E",void 0,n),this):(this.isStopped=!0,this._error(n))},r.prototype.complete=function(){this.isStopped?B(Rn,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(n){this.destination.next(n)},r.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(g),zn=Function.prototype.bind;function U(e,r){return zn.call(e,r)}var Dn=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var n=this.partialObserver;if(n.next)try{n.next(r)}catch(t){D(t)}},e.prototype.error=function(r){var n=this.partialObserver;if(n.error)try{n.error(r)}catch(t){D(t)}else D(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(n){D(n)}},e}(),K=function(e){function r(n,t,o){var i,u,c=e.call(this)||this;return p(n)||!n?i={next:n??void 0,error:t??void 0,complete:o??void 0}:c&&j.useDeprecatedNextContext?((u=Object.create(n)).unsubscribe=function(){return c.unsubscribe()},i={next:n.next&&U(n.next,u),error:n.error&&U(n.error,u),complete:n.complete&&U(n.complete,u)}):i=n,c.destination=new Dn(i),c}return v(r,e),r}(X);function D(e){var r;j.useDeprecatedSynchronousErrorHandling?(r=e,j.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=r)):gn(e)}function B(e,r){var n=j.onStoppedNotification;n&&wn(function(){return n(e,r)})}var qn={closed:!0,next:G,error:function(e){throw e},complete:G},Q=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wn(e){return e}function Mn(e){return e.length===0?Wn:e.length===1?e[0]:function(r){return e.reduce(function(n,t){return t(n)},r)}}var b=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var n=new e;return n.source=this,n.operator=r,n},e.prototype.subscribe=function(r,n,t){var o,i=this,u=(o=r)&&o instanceof X||function(c){return c&&p(c.next)&&p(c.error)&&p(c.complete)}(o)&&mn(o)?r:new K(r,n,t);return q(function(){var c=i,a=c.operator,f=c.source;u.add(a?a.call(u,f):f?i._subscribe(u):i._trySubscribe(u))}),u},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(n){r.error(n)}},e.prototype.forEach=function(r,n){var t=this;return new(n=sn(n))(function(o,i){var u=new K({next:function(c){try{r(c)}catch(a){i(a),u.unsubscribe()}},error:i,complete:o});t.subscribe(u)})},e.prototype._subscribe=function(r){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(r)},e.prototype[Q]=function(){return this},e.prototype.pipe=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Mn(r)(this)},e.prototype.toPromise=function(r){var n=this;return new(r=sn(r))(function(t,o){var i;n.subscribe(function(u){return i=u},function(u){return o(u)},function(){return t(i)})})},e.create=function(r){return new e(r)},e}();function sn(e){var r;return(r=e??j.Promise)!==null&&r!==void 0?r:Promise}function _n(e){return p(e?.lift)}function T(e){return function(r){if(_n(r))return r.lift(function(n){try{return e(n,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function x(e,r,n,t,o){return new Ln(e,r,n,t,o)}var Ln=function(e){function r(n,t,o,i,u,c){var a=e.call(this,n)||this;return a.onFinalize=u,a.shouldUnsubscribe=c,a._next=t?function(f){try{t(f)}catch(s){n.error(s)}}:e.prototype._next,a._error=i?function(f){try{i(f)}catch(s){n.error(s)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=o?function(){try{o()}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._complete,a}return v(r,e),r.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;e.prototype.unsubscribe.call(this),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},r}(X);function Vn(){return T(function(e,r){var n=null;e._refCount++;var t=x(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var o=e._connection,i=n;n=null,!o||i&&o!==i||o.unsubscribe(),r.unsubscribe()}});e.subscribe(t),t.closed||(n=e.connect())})}var Ee=function(e){function r(n,t){var o=e.call(this)||this;return o.source=n,o.subjectFactory=t,o._subject=null,o._refCount=0,o._connection=null,_n(n)&&(o.lift=n.lift),o}return v(r,e),r.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},r.prototype.getSubject=function(){var n=this._subject;return n&&!n.isStopped||(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var n=this._connection;this._subject=this._connection=null,n?.unsubscribe()},r.prototype.connect=function(){var n=this,t=this._connection;if(!t){t=this._connection=new g;var o=this.getSubject();t.add(this.source.subscribe(x(o,void 0,function(){n._teardown(),o.complete()},function(i){n._teardown(),o.error(i)},function(){return n._teardown()}))),t.closed&&(this._connection=null,t=g.EMPTY)}return t},r.prototype.refCount=function(){return Vn()(this)},r}(b),xn={now:function(){return(xn.delegate||performance).now()},delegate:void 0},C={schedule:function(e){var r=requestAnimationFrame,n=cancelAnimationFrame,t=r(function(o){n=void 0,e(o)});return new g(function(){return n?.(t)})},requestAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=C.delegate;return(n?.requestAnimationFrame||requestAnimationFrame).apply(void 0,w([],m(e)))},cancelAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return cancelAnimationFrame.apply(void 0,w([],m(e)))},delegate:void 0};function Un(e){return new b(function(r){var n=e||xn,t=n.now(),o=0,i=function(){r.closed||(o=C.requestAnimationFrame(function(u){o=0;var c=n.now();r.next({timestamp:e?c:u,elapsed:c-t}),i()}))};return i(),function(){o&&C.cancelAnimationFrame(o)}})}var Y,Se=Un(),Bn=A(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),F=function(e){function r(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return v(r,e),r.prototype.lift=function(n){var t=new an(this,this);return t.operator=n,t},r.prototype._throwIfClosed=function(){if(this.closed)throw new Bn},r.prototype.next=function(n){var t=this;q(function(){var o,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var u=P(t.currentObservers),c=u.next();!c.done;c=u.next())c.value.next(n)}catch(a){o={error:a}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}})},r.prototype.error=function(n){var t=this;q(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=n;for(var o=t.observers;o.length;)o.shift().error(n)}})},r.prototype.complete=function(){var n=this;q(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var t=n.observers;t.length;)t.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},r.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},r.prototype._innerSubscribe=function(n){var t=this,o=this,i=o.hasError,u=o.isStopped,c=o.observers;return i||u?yn:(this.currentObservers=null,c.push(n),new g(function(){t.currentObservers=null,W(c,n)}))},r.prototype._checkFinalizedStatuses=function(n){var t=this,o=t.hasError,i=t.thrownError,u=t.isStopped;o?n.error(i):u&&n.complete()},r.prototype.asObservable=function(){var n=new b;return n.source=this,n},r.create=function(n,t){return new an(n,t)},r}(b),an=function(e){function r(n,t){var o=e.call(this)||this;return o.destination=n,o.source=t,o}return v(r,e),r.prototype.next=function(n){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.next)===null||o===void 0||o.call(t,n)},r.prototype.error=function(n){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.error)===null||o===void 0||o.call(t,n)},r.prototype.complete=function(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)},r.prototype._subscribe=function(n){var t,o;return(o=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&o!==void 0?o:yn},r}(F),Oe=function(e){function r(n){var t=e.call(this)||this;return t._value=n,t}return v(r,e),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(n){var t=e.prototype._subscribe.call(this,n);return!t.closed&&n.next(this._value),t},r.prototype.getValue=function(){var n=this,t=n.hasError,o=n.thrownError,i=n._value;if(t)throw o;return this._throwIfClosed(),i},r.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},r}(F),nn={now:function(){return(nn.delegate||Date).now()},delegate:void 0},Yn=function(e){function r(n,t,o){n===void 0&&(n=1/0),t===void 0&&(t=1/0),o===void 0&&(o=nn);var i=e.call(this)||this;return i._bufferSize=n,i._windowTime=t,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=t===1/0,i._bufferSize=Math.max(1,n),i._windowTime=Math.max(1,t),i}return v(r,e),r.prototype.next=function(n){var t=this,o=t.isStopped,i=t._buffer,u=t._infiniteTimeWindow,c=t._timestampProvider,a=t._windowTime;o||(i.push(n),!u&&i.push(c.now()+a)),this._trimBuffer(),e.prototype.next.call(this,n)},r.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(n),o=this._infiniteTimeWindow,i=this._buffer.slice(),u=0;u<i.length&&!n.closed;u+=o?1:2)n.next(i[u]);return this._checkFinalizedStatuses(n),t},r.prototype._trimBuffer=function(){var n=this,t=n._bufferSize,o=n._timestampProvider,i=n._buffer,u=n._infiniteTimeWindow,c=(u?1:2)*t;if(t<1/0&&c<i.length&&i.splice(0,i.length-c),!u){for(var a=o.now(),f=0,s=1;s<i.length&&i[s]<=a;s+=2)f=s;f&&i.splice(0,f+1)}},r}(F),je=function(e){function r(){var n=e!==null&&e.apply(this,arguments)||this;return n._value=null,n._hasValue=!1,n._isComplete=!1,n}return v(r,e),r.prototype._checkFinalizedStatuses=function(n){var t=this,o=t.hasError,i=t._hasValue,u=t._value,c=t.thrownError,a=t.isStopped,f=t._isComplete;o?n.error(c):(a||f)&&(i&&n.next(u),n.complete())},r.prototype.next=function(n){this.isStopped||(this._value=n,this._hasValue=!0)},r.prototype.complete=function(){var n=this,t=n._hasValue,o=n._value;n._isComplete||(this._isComplete=!0,t&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(F),Gn=function(e){function r(n,t){return e.call(this)||this}return v(r,e),r.prototype.schedule=function(n,t){return this},r}(g),Hn=function(e,r){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];return setInterval.apply(void 0,w([e,r],m(n)))},Kn=function(e){return clearInterval(e)},N=function(e){function r(n,t){var o=e.call(this,n,t)||this;return o.scheduler=n,o.work=t,o.pending=!1,o}return v(r,e),r.prototype.schedule=function(n,t){var o;if(t===void 0&&(t=0),this.closed)return this;this.state=n;var i=this.id,u=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(u,i,t)),this.pending=!0,this.delay=t,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(u,this.id,t),this},r.prototype.requestAsyncId=function(n,t,o){return o===void 0&&(o=0),Hn(n.flush.bind(n,this),o)},r.prototype.recycleAsyncId=function(n,t,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return t;t!=null&&Kn(t)},r.prototype.execute=function(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(n,t);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(n,t){var o,i=!1;try{this.work(n)}catch(u){i=!0,o=u||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},r.prototype.unsubscribe=function(){if(!this.closed){var n=this.id,t=this.scheduler,o=t.actions;this.work=this.state=this.scheduler=null,this.pending=!1,W(o,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(Gn),Zn=1,Z={};function En(e){return e in Z&&(delete Z[e],!0)}var $n=function(e){var r=Zn++;return Z[r]=!0,Y||(Y=Promise.resolve()),Y.then(function(){return En(r)&&e()}),r},Jn=function(e){En(e)},$={setImmediate:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=$.delegate;return(n?.setImmediate||$n).apply(void 0,w([],m(e)))},clearImmediate:function(e){return Jn(e)},delegate:void 0},Xn=function(e){function r(n,t){var o=e.call(this,n,t)||this;return o.scheduler=n,o.work=t,o}return v(r,e),r.prototype.requestAsyncId=function(n,t,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,n,t,o):(n.actions.push(this),n._scheduled||(n._scheduled=$.setImmediate(n.flush.bind(n,void 0))))},r.prototype.recycleAsyncId=function(n,t,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,t,o);var u=n.actions;t!=null&&((i=u[u.length-1])===null||i===void 0?void 0:i.id)!==t&&($.clearImmediate(t),n._scheduled===t&&(n._scheduled=void 0))},r}(N),fn=function(){function e(r,n){n===void 0&&(n=e.now),this.schedulerActionCtor=r,this.now=n}return e.prototype.schedule=function(r,n,t){return n===void 0&&(n=0),new this.schedulerActionCtor(this,r).schedule(t,n)},e.now=nn.now,e}(),R=function(e){function r(n,t){t===void 0&&(t=fn.now);var o=e.call(this,n,t)||this;return o.actions=[],o._active=!1,o}return v(r,e),r.prototype.flush=function(n){var t=this.actions;if(this._active)t.push(n);else{var o;this._active=!0;do if(o=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,o){for(;n=t.shift();)n.unsubscribe();throw o}}},r}(fn),Ae=new(function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return v(r,e),r.prototype.flush=function(n){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var o,i=this.actions;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===t&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===t&&i.shift();)n.unsubscribe();throw o}},r}(R))(Xn);var Te=new R(N);var Qn=function(e){function r(n,t){var o=e.call(this,n,t)||this;return o.scheduler=n,o.work=t,o}return v(r,e),r.prototype.schedule=function(n,t){return t===void 0&&(t=0),t>0?e.prototype.schedule.call(this,n,t):(this.delay=t,this.state=n,this.scheduler.flush(this),this)},r.prototype.execute=function(n,t){return t>0||this.closed?e.prototype.execute.call(this,n,t):this._execute(n,t)},r.prototype.requestAsyncId=function(n,t,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,n,t,o):(n.flush(this),0)},r}(N),Pe=new(function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return v(r,e),r}(R))(Qn);var ne=function(e){function r(n,t){var o=e.call(this,n,t)||this;return o.scheduler=n,o.work=t,o}return v(r,e),r.prototype.requestAsyncId=function(n,t,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,n,t,o):(n.actions.push(this),n._scheduled||(n._scheduled=C.requestAnimationFrame(function(){return n.flush(void 0)})))},r.prototype.recycleAsyncId=function(n,t,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,t,o);var u=n.actions;t!=null&&((i=u[u.length-1])===null||i===void 0?void 0:i.id)!==t&&(C.cancelAnimationFrame(t),n._scheduled=void 0)},r}(N),Ie=new(function(e){function r(){return e!==null&&e.apply(this,arguments)||this}return v(r,e),r.prototype.flush=function(n){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var o,i=this.actions;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===t&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===t&&i.shift();)n.unsubscribe();throw o}},r}(R))(ne);var ke=function(e){function r(n,t){n===void 0&&(n=ee),t===void 0&&(t=1/0);var o=e.call(this,n,function(){return o.frame})||this;return o.maxFrames=t,o.frame=0,o.index=-1,o}return v(r,e),r.prototype.flush=function(){for(var n,t,o=this.actions,i=this.maxFrames;(t=o[0])&&t.delay<=i&&(o.shift(),this.frame=t.delay,!(n=t.execute(t.state,t.delay))););if(n){for(;t=o.shift();)t.unsubscribe();throw n}},r.frameTimeFactor=10,r}(R),ee=function(e){function r(n,t,o){o===void 0&&(o=n.index+=1);var i=e.call(this,n,t)||this;return i.scheduler=n,i.work=t,i.index=o,i.active=!0,i.index=n.index=o,i}return v(r,e),r.prototype.schedule=function(n,t){if(t===void 0&&(t=0),Number.isFinite(t)){if(!this.id)return e.prototype.schedule.call(this,n,t);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(n,t)}return g.EMPTY},r.prototype.requestAsyncId=function(n,t,o){o===void 0&&(o=0),this.delay=n.frame+o;var i=n.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(n,t,o){},r.prototype._execute=function(n,t){if(this.active===!0)return e.prototype._execute.call(this,n,t)},r.sortActions=function(n,t){return n.delay===t.delay?n.index===t.index?0:n.index>t.index?1:-1:n.delay>t.delay?1:-1},r}(N),Sn=new b(function(e){return e.complete()});function re(e){return e&&p(e.schedule)}function te(e){return e[e.length-1]}function oe(e){return re(te(e))?e.pop():void 0}var en=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function On(e){return p(e?.then)}function jn(e){return p(e[Q])}function An(e){return Symbol.asyncIterator&&p(e?.[Symbol.asyncIterator])}function Tn(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ln,Pn=typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator";function In(e){return p(e?.[Pn])}function kn(e){return on(this,arguments,function(){var r,n,t;return L(this,function(o){switch(o.label){case 0:r=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,S(r.read())];case 3:return n=o.sent(),t=n.value,n.done?[4,S(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,S(t)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Cn(e){return p(e?.getReader)}function I(e){if(e instanceof b)return e;if(e!=null){if(jn(e))return o=e,new b(function(i){var u=o[Q]();if(p(u.subscribe))return u.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(en(e))return t=e,new b(function(i){for(var u=0;u<t.length&&!i.closed;u++)i.next(t[u]);i.complete()});if(On(e))return n=e,new b(function(i){n.then(function(u){i.closed||(i.next(u),i.complete())},function(u){return i.error(u)}).then(null,gn)});if(An(e))return pn(e);if(In(e))return r=e,new b(function(i){var u,c;try{for(var a=P(r),f=a.next();!f.done;f=a.next()){var s=f.value;if(i.next(s),i.closed)return}}catch(l){u={error:l}}finally{try{f&&!f.done&&(c=a.return)&&c.call(a)}finally{if(u)throw u.error}}i.complete()});if(Cn(e))return pn(kn(e))}var r,n,t,o;throw Tn(e)}function pn(e){return new b(function(r){(function(n,t){var o,i,u,c;return tn(this,void 0,void 0,function(){var a,f;return L(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),o=un(n),s.label=1;case 1:return[4,o.next()];case 2:if((i=s.sent()).done)return[3,4];if(a=i.value,t.next(a),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=s.sent(),u={error:f},[3,11];case 6:return s.trys.push([6,,9,10]),i&&!i.done&&(c=o.return)?[4,c.call(o)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,r).catch(function(n){return r.error(n)})})}function _(e,r,n,t,o){t===void 0&&(t=0),o===void 0&&(o=!1);var i=r.schedule(function(){n(),o?e.add(this.schedule(null,t)):this.unsubscribe()},t);if(e.add(i),!o)return i}function vn(e,r){return r===void 0&&(r=0),T(function(n,t){n.subscribe(x(t,function(o){return _(t,e,function(){return t.next(o)},r)},function(){return _(t,e,function(){return t.complete()},r)},function(o){return _(t,e,function(){return t.error(o)},r)}))})}function hn(e,r){return r===void 0&&(r=0),T(function(n,t){t.add(e.schedule(function(){return n.subscribe(t)},r))})}function ie(e,r){return new b(function(n){var t;return _(n,r,function(){t=e[Pn](),_(n,r,function(){var o,i,u;try{i=(o=t.next()).value,u=o.done}catch(c){return void n.error(c)}u?n.complete():n.next(i)},0,!0)}),function(){return p(t?.return)&&t.return()}})}function dn(e,r){if(!e)throw new Error("Iterable cannot be null");return new b(function(n){_(n,r,function(){var t=e[Symbol.asyncIterator]();_(n,r,function(){t.next().then(function(o){o.done?n.complete():n.next(o.value)})},0,!0)})})}function ue(e,r){if(e!=null){if(jn(e))return function(n,t){return I(n).pipe(hn(t),vn(t))}(e,r);if(en(e))return function(n,t){return new b(function(o){var i=0;return t.schedule(function(){i===n.length?o.complete():(o.next(n[i++]),o.closed||this.schedule())})})}(e,r);if(On(e))return function(n,t){return I(n).pipe(hn(t),vn(t))}(e,r);if(An(e))return dn(e,r);if(In(e))return ie(e,r);if(Cn(e))return function(n,t){return dn(kn(n),t)}(e,r)}throw Tn(e)}function ce(e,r){return r?ue(e,r):I(e)}function se(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ce(e,oe(e))}function ae(e,r){var n=p(e)?e:function(){return e},t=function(o){return o.error(n())};return new b(r?function(o){return r.schedule(t,0,o)}:t)}(function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"})(ln||(ln={}));var Ce=function(){function e(r,n,t){this.kind=r,this.value=n,this.error=t,this.hasValue=r==="N"}return e.prototype.observe=function(r){return fe(this,r)},e.prototype.do=function(r,n,t){var o=this,i=o.kind,u=o.value,c=o.error;return i==="N"?r?.(u):i==="E"?n?.(c):t?.()},e.prototype.accept=function(r,n,t){var o;return p((o=r)===null||o===void 0?void 0:o.next)?this.observe(r):this.do(r,n,t)},e.prototype.toObservable=function(){var r=this,n=r.kind,t=r.value,o=r.error,i=n==="N"?se(t):n==="E"?ae(function(){return o}):n==="C"?Sn:0;if(!i)throw new TypeError("Unexpected notification kind "+n);return i},e.createNext=function(r){return new e("N",r)},e.createError=function(r){return new e("E",void 0,r)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function fe(e,r){var n,t,o,i=e,u=i.kind,c=i.value,a=i.error;if(typeof u!="string")throw new TypeError('Invalid notification, missing "kind"');u==="N"?(n=r.next)===null||n===void 0||n.call(r,c):u==="E"?(t=r.error)===null||t===void 0||t.call(r,a):(o=r.complete)===null||o===void 0||o.call(r)}function le(e){return!!e&&(e instanceof b||p(e.lift)&&p(e.subscribe))}var Fe=A(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});var Ne=A(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),Re=A(function(e){return function(r){e(this),this.name="NotFoundError",this.message=r}}),ze=A(function(e){return function(r){e(this),this.name="SequenceError",this.message=r}});var De=A(function(e){return function(r){r===void 0&&(r=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function Fn(e,r){return T(function(n,t){var o=0;n.subscribe(x(t,function(i){t.next(e.call(r,i,o++))}))})}var pe=Array.isArray;function ve(e){return Fn(function(r){return function(n,t){return pe(t)?n.apply(void 0,w([],m(t))):n(t)}(e,r)})}var qe=Array.isArray;var We=Object.prototype;function he(e,r,n,t,o,i,u,c){var a=[],f=0,s=0,l=!1,h=function(){!l||a.length||f||r.complete()},y=function(E){return f<t?d(E):a.push(E)},d=function(E){i&&r.next(E),f++;var rn=!1;I(n(E,s++)).subscribe(x(r,function(k){o?.(k),i?y(k):r.next(k)},function(){rn=!0},void 0,function(){if(rn)try{f--;for(var k=function(){var z=a.shift();u?_(r,u,function(){return d(z)}):d(z)};a.length&&f<t;)k();h()}catch(z){r.error(z)}}))};return e.subscribe(x(r,y,function(){l=!0,h()})),function(){c?.()}}function Nn(e,r,n){return n===void 0&&(n=1/0),p(r)?Nn(function(t,o){return Fn(function(i,u){return r(t,i,o,u)})(I(e(t,o)))},n):(typeof r=="number"&&(n=r),T(function(t,o){return he(t,o,e,n)}))}var de=["addListener","removeListener"],be=["addEventListener","removeEventListener"],ye=["on","off"];function J(e,r,n,t){if(p(n)&&(t=n,n=void 0),t)return J(e,r,n).pipe(ve(t));var o=m(function(c){return p(c.addEventListener)&&p(c.removeEventListener)}(e)?be.map(function(c){return function(a){return e[c](r,a,n)}}):function(c){return p(c.addListener)&&p(c.removeListener)}(e)?de.map(bn(e,r)):function(c){return p(c.on)&&p(c.off)}(e)?ye.map(bn(e,r)):[],2),i=o[0],u=o[1];if(!i&&en(e))return Nn(function(c){return J(c,r,n)})(I(e));if(!i)throw new TypeError("Invalid event target");return new b(function(c){var a=function(){for(var f=[],s=0;s<arguments.length;s++)f[s]=arguments[s];return c.next(1<f.length?f:f[0])};return i(a),function(){return u(a)}})}function bn(e,r){return function(n){return function(t){return e[n](r,t)}}}var Me=new b(G);var Le=Array.isArray;function me(e,r){return T(function(n,t){var o=0;n.subscribe(x(t,function(i){return e.call(r,i,o++)&&t.next(i)}))})}function we(e){return e<=0?function(){return Sn}:T(function(r,n){var t=0;r.subscribe(x(n,function(o){++t<=e&&(n.next(o),e<=t&&n.complete())}))})}function ge(e){return me(function(r,n){return e<=n})}export{b as Observable,Yn as ReplaySubject,F as Subject,J as fromEvent,le as isObservable,ge as skip,we as take};
